<div
  class="z-50 fixed xl:sticky top-0 h-screen flex flex-col justify-between gap-8 bg-gray-100 w-80 p-4 transition-all duration-500 print:hidden overflow-y-scroll"
  [ngClass]="{
    'translate-x-0': open(),
    '-translate-x-[100%] xl:w-0 xl:fixed': !open()
  }"
>
  <section>
    <!-- Logo -->
    <div class="logo flex items-center gap-4 mb-8">
      <img src="favicon.ico" class="w-10 h-10 bg-slate-800 p-2 rounded-xl" />
      <div>
        <h3 class="font-bold text-indigo-600">GabrielDev</h3>
        <p class="text-gray-800 text-xs">Desarrollo de aplicaciones</p>
      </div>
    </div>

    <!-- Search -->
    <form>
      <input
        type="text"
        class="w-full p-2 rounded-lg outline-none bg-gray-200"
        placeholder="Buscador"
      />
    </form>

    <!-- Calendario -->
    <ul class="mt-4 mb-8">
      <li>
        <a
          href="#"
          class="flex items-center gap-4 p-2 hover:bg-gray-200 transition-colors rounded-lg"
        >
          <i class="bx bx-calendar"></i>
          <span>Calendario</span>
        </a>
      </li>
    </ul>
    <hr class="my-8" />

    <!-- Menu items -->
    <h5
      class="uppercase font-semibold text-xs text-indigo-600 tracking-[2px] mb-4"
    >
      Menu
    </h5>
    <cdk-accordion class="example-accordion">
      @for (item of pruba; track item; let index = $index) {
        <cdk-accordion-item
          #accordionItem="cdkAccordionItem"
          class="example-accordion-item"
          role="button"
          tabindex="0"
          [attr.id]="'accordion-header-' + index"
          [attr.aria-expanded]="accordionItem.expanded"
          [attr.aria-controls]="'accordion-body-' + index"
        >
          <div
            class="flex items-center justify-between gap-4 p-2 hover:bg-gray-200 transition-colors rounded-lg text-gray-800"
            (click)="accordionItem.toggle()"
          >
            <div class="flex gap-2 items-center">
              <i [class]="item.icon"></i>
              <span>{{ item.title }}</span>
            </div>
            @if (accordionItem.expanded) {
              <i class="bx bxs-up-arrow"></i>
            } @else {
              <i class="bx bxs-down-arrow"></i>
            }
          </div>
          @for (link of item.links; track $index) {
            <a
              class="flex items-center gap-4 px-5 w-[250px] py-2 hover:bg-gray-200 transition-colors text-gray-800 ml-3 rounded-e-lg border-l-2"
              role="region"
              [style.display]="accordionItem.expanded ? '' : 'none'"
              [attr.id]="'accordion-body-' + index"
              [routerLink]="link.link"
              [routerLinkActive]="'active'"
              [routerLinkActiveOptions]="{ exact: true }"
              [attr.aria-labelledby]="'accordion-header-' + index"
            >
              <i [class]="link.icon"></i>
              <span>{{ link.name }}</span>
            </a>
          }
        </cdk-accordion-item>
      }
    </cdk-accordion>
    <ul>
      <!-- Links -->
      @for (item of items; track $index) {
        <li>
          <a
            [routerLink]="item.link"
            [routerLinkActive]="'active'"
            [routerLinkActiveOptions]="{ exact: true }"
            class="flex items-center gap-4 p-2 hover:bg-gray-200 transition-colors rounded-lg text-gray-800"
          >
            <i [class]="item.icon"></i>
            <span>{{ item.name }}</span>
          </a>
        </li>
      }
    </ul>
  </section>

  <!-- Bottom -->
  <section>
    <!-- Settings -->
    <ul class="my-4">
      <li>
        <a
          href="#"
          class="flex items-center gap-4 p-2 text-gray-500 hover:bg-gray-200 transition-colors rounded-lg"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            strokeWidth="{1.5}"
            stroke="currentColor"
            class="w-5 h-5"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"
            />
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
            />
          </svg>
          <span>Ajustes</span>
        </a>
      </li>
    </ul>

    <!-- Info user -->
    <div class="flex items-center gap-4 pt-4 border-t">
      <img
        src="https://img.freepik.com/fotos-premium/retrato-viejo-mexicano-sombrero_379858-2229.jpg"
        class="w-10 h-10 object-cover rounded-xl ring-4 ring-gray-200"
      />
      <div>
        <h3 class="font-bold text-gray-900">{{ user()?.usuario?.name }}</h3>
        <div class="flex gap-4">
          @for (rol of user()?.roles; track $index) {
            <p class="text-gray-800 text-xs">{{ rol }}</p>
          }
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Backdrop color black -->
<div
  class="bg-black/50 absolute inset-0 xl:hidden transition-all duration-50 z-40 print:hidden"
  [ngClass]="{
    'opacity-100': open(),
    'opacity-0 invisible': !open()
  }"
  (click)="toogle()"
></div>
